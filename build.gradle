/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java'

    // Apply the application plugin to add support for building an application
    id 'application'

    id 'idea'
}

repositories {
    mavenLocal()
    maven {
        url = 'http://repo.maven.apache.org/maven2'
    }
}

dependencies {
    compile 'org.apache.cayenne:cayenne-server:4.1.B2'
    compile 'org.postgresql:postgresql:42.2.5'
    compile 'com.squareup:javapoet:1.11.1'
    compile 'org.mariadb.jdbc:mariadb-java-client:2.4.1'
    compile 'jakarta.xml.bind:jakarta.xml.bind-api:2.3.2'
    compile 'org.apache.commons:commons-lang3:3.9'
    compile 'commons-cli:commons-cli:1.4'

    // https://mvnrepository.com/artifact/org.slf4j/slf4j-api
    compile group: 'org.slf4j', name: 'slf4j-api', version: '1.7.26'
    // https://mvnrepository.com/artifact/org.slf4j/slf4j-log4j12
    compile group: 'org.slf4j', name: 'slf4j-log4j12', version: '1.7.26'
}

group = 'de.unidue'
version = '1.0-SNAPSHOT'
sourceCompatibility = '1.8'

sourceSets.main.java.srcDirs += file("src/gen/java")

// Define the main class for the application
mainClassName = 'de.unidue.dbmover.Mover'

task move (type:JavaExec) {

    main = mainClassName
    classpath = sourceSets.main.runtimeClasspath

    /* Can pass all the properties: */
    systemProperties System.getProperties()

    /*
    Need to split the space-delimited value in the exec.args

    Example:
    ./gradlew move -Dexec.args='-gen_pk_attributes src/main/resources/datamap.xml'
    */
    args System.getProperty("exec.args", "").split(" ")
}

